<!DOCTYPE html>										
<html>										
	<head>									
		<meta charset="utf-8">								
		<title>StopWatch</title>								
		<style>								
			/*inputタグのtype属性がtextの要素にスタイルを適用 */							
			input[type=text]{							
				/* 幅を300pxに指定 */						
				width: 300px;						
				/* 高さを50pxに指定 */						
				height: 50px;						
				/* 文字サイズを2.8emに指定 */						
				font-size: 2.8em;						
			}							
			/*inputタグのtype属性がbuttonの要素にスタイルを適用 */							
			input[type=button]{							
				/* ボタンの上にカーソルが重なった時にマウスカーソルを変化させる */						
				cursor: pointer;						
				/* 幅を150pxに指定 */						
				width: 150px;						
				/*  背景色を黒に指定 */						
				background-color: #000;						
				/*  文字色を白に指定 */						
				color: #fff;						
				/*  ボタンの余白を設定 - 縦方向に15px、横方向に40px */						
				padding: 15px 40px;						
			}							
		</style>								
	</head>									
	<body>									
		<form name="displayForm">								
			<input type="text" size="25" name="intervalTime">							
			<br>							
			<input type="button" class="buttons" value="Start" name="StartButton" onclick="Start()">							
			<input type="button" class="buttons" value="Stop" name="StopButton" onclick="Stop()">							
			<input type="button" class="buttons" value="Clear" name="ClearButton" onclick="Clear()">							
		</form>								
		<script>								
			//初期表示でtextの要素に"00:00.000"を表示させる。							
			document.displayForm.intervalTime.value = "00:00.000";							
			//グローバル変数の宣言							
			var myInterval; // setInterval()関数の戻り値を代入する変数							
			var intervalTime; // スタートボタン押下からストップボタン押下までのミリ秒を保持する変数							
			var startTime; // スタートボタン押下時の日付を保持する変数							
			var stopTime = 0; // スタートボタン押下からストップボタン押下までのミリ秒を保持する変数							
										
			//Startボタン押下時の動作							
			function Start(){							
				startTime = new Date();						
				myInterval = setInterval("Display()",1);						
			}							
										
			//Stopボタン押下時の動作							
			function Stop(){							
				clearInterval(myInterval); // setInterval()の繰り返し処理を停止する。						
				stopTime = intervalTime; // スタートボタンを再度押下した場合に、続きから値を表示するための値を保持する。						
			}							
										
			//Clearボタン押下時の動作							
			function Clear(){							
				document.displayForm.intervalTime.value = "00:00.000"; // カウント表示部分を初期表示に戻す。						
				stopTime = 0; // スタートからストップまでのミリ秒をクリアする。						
			}							
										
			//カウント部分の表示							
			function Display(){							
				var passedTime = new Date();						
										
				intervalTime = passedTime.getTime() - startTime.getTime() + stopTime;						
				var hour = Math.floor(intervalTime / (60 * 60 * 1000)); // '時間'を取得						
				var min = Math.floor((intervalTime - (hour * 60 * 60 * 1000)) / (60 * 1000));						
				var sec = Math.floor((intervalTime - (hour * 60 * 60 * 1000) - (min * 60 * 1000)) / 1000);						
				var msec = intervalTime % 1000;						
										
				// 計算結果をカウント部分に表示する						
				document.displayForm.intervalTime.value = SetZero(min) + ":" + SetZero(sec) + "." + msec;						
			}							
										
			//ゼロパディング							
			function SetZero(displayValue){							
				if(displayValue < 10){// 受け取った引数が10未満(1桁)の場合。						
					return "0" + displayValue; // 引数に0を追加した返却。					
				}						
				return displayValue;						
			}							
		</script>								
	</body>									
</html>										
